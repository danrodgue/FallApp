<!DOCTYPE html>
<html lang="es">
<head>
     <meta charset="UTF-8">
     <title>Información - FallApp</title>
     <link rel="stylesheet" href="../css/login.css">
     <link rel="stylesheet" href="../css/info.css">
     <!-- Leaflet CSS para el mapa -->
     <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
     <meta name="viewport" content="width=device-width,initial-scale=1">
     <style>
          #mapaUbicacion {
               width: 100% !important;
               height: 300px !important;
               border-radius: 8px;
               margin-bottom: 16px;
               background: #e5e3df;
               position: relative;
               z-index: 10;
          }
          
          #mapaUbicacion .leaflet-container {
               width: 100%;
               height: 100%;
          }
     </style>
</head>
<body class="events-page">
     <script src="../js/config.js"></script>
     
     <header class="site-header">
          <div class="header-rect">
               <a href="home.html" class="btn header-back-btn">← Volver</a>
               <img src="../renderer/src/img/fallap_logo.png" class="logo header-logo" alt="FallApp logo">
               <button id="logout" class="btn header-logout">Cerrar sesión</button>
          </div>
     </header>

     <!-- Espaciador para compensar el header fijo -->
     <div class="header-spacer"></div>

     <div class="events-center">
          <div class="modal-card falla-container">
               <div class="falla-header">
                    <div class="falla-title">
                         <h2>Información de la falla</h2>
                         <div class="falla-meta muted">Detalles, estado y edición rápida</div>
                    </div>
               </div>

               <div class="falla-body">
                    <div class="falla-main">
                         <form id="fallaForm">
                              <div class="falla-helper">Los campos están editables localmente (no persistidos a menos que guardes con backend).</div>
                              
                              <!-- Sección de imagen de la falla -->
                              <div class="falla-image-section">
                                   <label>Ubicación de la falla</label>
                                   <div id="mapaUbicacion"></div>
                              </div>

                              <div class="form-row">
                                   <div class="field">
                                        <label>ID</label>
                                        <input id="fallaId" name="id" readonly />
                                   </div>
                                   <div class="field">
                                        <label>Fecha</label>
                                        <input id="fallaFecha" name="fecha" type="datetime-local" disabled />
                                   </div>
                              </div>

                              <div class="form-row">
                                   <div class="field">
                                        <label>Nombre del Casal</label>
                                        <input id="fallaUbicacion" name="ubicacion" disabled />
                                   </div>
                                   <div class="field">
                                        <label>Agrupación</label>
                                        <input id="fallaTipo" name="tipo" disabled />
                                   </div>
                              </div>

                              <div class="field">
                                   <label>Descripción</label>
                                   <textarea id="fallaDescripcion" name="descripcion" rows="6" disabled></textarea>
                              </div>

                              <div class="form-actions">
                                   <button type="button" id="editBtn" class="btn-secondary">Editar</button>
                                   <button type="button" class="btn-primary" id="saveBtn" style="display:none;">Guardar</button>
                              </div>
                         </form>
                    </div>

                    <aside class="falla-side">
                         <div class="info-block">
                              <h4>Resumen</h4>
                              <p class="muted" id="sideSummary">Breve resumen de la incidencia mostrado aquí.</p>
                         </div>
                         <div class="side-actions">
                              <button id="deleteBtn" class="btn btn-danger">Eliminar</button>
                         </div>
                    </aside>
               </div>
          </div>
     </div>
     <!-- Leaflet JS para el mapa -->
     <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
     <script src="../js/info.js"></script>
</body>
</html>

